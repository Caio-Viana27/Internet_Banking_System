# --- Configuração Geral e do Eureka ---
spring.application.name=Gateway
server.port=8082
eureka.client.serviceUrl.defaultZone=http://localhost:8081/eureka

# --- ROTEAMENTO EXPLÍCITO (Versão Corrigida com Filtro) ---

# ROTA 1: Para a API principal do InternetBanking
spring.cloud.gateway.routes[0].id=internetbanking-api
spring.cloud.gateway.routes[0].uri=lb://INTERNETBANKING
spring.cloud.gateway.routes[0].predicates[0]=Path=/internetbanking/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=1

# ROTA 2: Rota específica para a documentação do Swagger do InternetBanking
spring.cloud.gateway.routes[1].id=internetbanking-docs
spring.cloud.gateway.routes[1].uri=lb://INTERNETBANKING
spring.cloud.gateway.routes[1].predicates[0]=Path=/v3/api-docs/internetbanking
# A LINHA ABAIXO É A SOLUÇÃO: Ela reescreve o caminho antes de encaminhar
spring.cloud.gateway.routes[1].filters[0]=RewritePath=/v3/api-docs/internetbanking, /v3/api-docs

# Configuração global de CORS para permitir requisições
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*

# --- CONFIGURAÇÃO DA INTERFACE DO SWAGGER NO GATEWAY ---

# Item do menu para o Internet Banking
springdoc.swagger-ui.urls[0].name=Internet Banking API
springdoc.swagger-ui.urls[0].url=/v3/api-docs/internetbanking
springdoc.swagger-ui.use-root-path=true

